function addTagToTextarea(e,t){let n=t.parent(".form_helper").siblings("#form").children(".form-group").children("textarea");n.val(n.val()+e)}function error(){alert("Oops, something is wrong!"),location.reload()}function error(){alert("Oops, something is wrong!"),location.reload()}function authCheck(e=!0){return!!$(".field_for_auth").length||(e&&(window.location.href="/login"),!1)}function error(){alert("Oops, something is wrong!"),location.reload()}$(document).ready(function(){if(document.documentElement.clientWidth>685){const e=$("#left").offset().top;$("#left").css("height",document.documentElement.clientHeight-e),$(window).scroll(function(){const t=$(this).scrollTop();"none"!=$("#left").css("display")&&t<=e?($("#content_container").removeClass("fixed"),$("#left").css("height",document.documentElement.clientHeight-(e-t))):"none"!=$("#left").css("display")&&t>=e&&($("#content_container").addClass("fixed"),$("#left").css("height",document.documentElement.clientHeight)),window.onresize=function(){t<=e?$("#left").css("height",document.documentElement.clientHeight-(e-t)):t>=e&&$("#left").css("height",document.documentElement.clientHeight)}})}$(window).scrollTop(0)}),$(".menu-btn").on("click",function(){"none"==$("#left").css("display")?$("#left").css("display","flex"):$("#left").css("display","none")}),$(".form_bold-btn").on("click",function(){addTagToTextarea("<b></b>",$(this))}),$(".form_italic-btn").on("click",function(){addTagToTextarea("<i></i>",$(this))}),$(".form_underline-btn").on("click",function(){addTagToTextarea("<u></u>",$(this))}),$(".form_crossed-btn").on("click",function(){addTagToTextarea("<s></s>",$(this))}),$(".form_code-btn").on("click",function(){addTagToTextarea("<code></code>",$(this))}),$("#profile #set_user_description_form").on("submit",function(e){e.preventDefault();let t=$(this).children("input").val(),n=$(this).children(".author").val();$.ajax({url:"/handler/set-description",method:"get",dataType:"html",data:{description:t,author_id:n},success:function(){$("#profile .profile_stats .chapter_block .user-description").text(t),$("#profile .profile_stats .chapter_block form").css("display","none"),$(".edit_description_btn").removeClass("view")},error:error})}),$("#edit-form").submit(function(e){e.preventDefault();let t=$(this).parent(".single_form").parent(".form_block").parent(".comment_form_block").siblings(".answer_content").children("span").html(),n=$(this).parent(".single_form").parent(".form_block").parent(".comment_form_block").siblings(".object").val(),s=$(this).children("textarea").val(),i=$(this);isNaN(comm_id)&&error(),$.ajax({url:"/handler/comment-edit",method:"get",dataType:"html",data:{comment_id:n,content:s,old_content:t},success:function(){i.parent(".single_form").parent(".form_block").parent(".comment_form_block").css("display","none"),i.parent(".single_form").parent(".form_block").parent(".comment_form_block").siblings(".answer_content").children("span").text(s),i.parent(".single_form").parent(".form_block").parent(".comment_form_block").siblings(".answer_content").children("span").css("display","block"),i.parent(".single_form").parent(".form_block").parent(".comment_form_block").siblings(".edit-btn").removeClass("editing")},error:error})}),$(".forgot_form_block form").on("submit",function(e){e.preventDefault();let t=$(this).children(".field").children(".username").val(),n=$(this).children(".field").children(".email").val();$.ajax({url:"/handler/forgot-password",method:"get",dataType:"html",data:{username:t,email:n},success:function(){window.location.href="/"},error:error})}),$(".change_form_block form").on("beforeSubmit",function(){let e=$(this).children(".field").children(".old_pass").children("input").val(),t=$(this).children(".field").children(".new_pass").children("input").val();$.ajax({url:"/handler/change-password",method:"get",dataType:"html",data:{old_pass:e,new_pass:t},success:function(){window.location.href="/"},error:function(){alert("Password mismatch"),error()}})}),$(".change_form_block form").on("submit",function(e){e.preventDefault()}),$(".edit_description_btn").on("click",function(){$(this).hasClass("view")?($("#profile .profile_stats .chapter_block form").css("display","none"),$(this).removeClass("view")):($("#profile .profile_stats .chapter_block form").css("display","block"),$(this).addClass("view"))}),$(document).ready(function(){$(".user_have_answer").length&&$(".answer_form_block").css("display","none")}),$(".comments-btn").on("click",function(){let e=$(this).parent(".info-buttons").parent(".soc_buttons").siblings(".comments_block").children(".comment").length,t=$(this).siblings(".comments_block").children(".comment").length;(e||t||authCheck())&&($(this).hasClass("view")?($(this).hasClass("main_comments-btn")?$(".main_comments").css("display","none"):$(this).siblings(".comments_block").css("display","none"),$(this).removeClass("view")):($(this).hasClass("main_comments-btn")?$(".main_comments").css("display","block"):$(this).siblings(".comments_block").css("display","block"),$(this).addClass("view")))}),$(".subscribe_ques-btn").on("click",function(){if(authCheck()){let e=$(this).prop("classList")[1],t=$(this);isNaN(e)&&error(),$.ajax({url:"/handler/sub-question",method:"get",dataType:"html",data:{question_id:e},beforeSend:function(){t.attr("disabled",!0)},success:function(){setTimeout(()=>t.attr("disabled",!1),1e3),t.hasClass("cl")?(1==Number(t.children("span").text())?t.text("Подписаться"):t.html("Подписаться <span>"+(Number(t.children("span").text())-1)+"</span>"),t.removeClass("cl")):(t.children("span").length?t.children("span").text(Number(t.children("span").text())+1):t.html(t.text()+" <span>1</span>"),t.addClass("cl"))},error:error})}}),$(".like-btn").on("click",function(){if(authCheck()){let e=$(this).siblings(".object").val(),t=$(this);isNaN(e)&&error(),$.ajax({url:"/handler/like",method:"get",dataType:"html",data:{comment_id:e},beforeSend:function(){t.attr("disabled",!0)},success:function(){setTimeout(()=>t.attr("disabled",!1),1e3),t.hasClass("cl")?(1==Number(t.children("span").text())?t.text("Нравится"):t.html("Нравится <span>"+(Number(t.children("span").text())-1)+"</span>"),t.removeClass("cl")):(t.children("span").length?t.children("span").text(Number(t.children("span").text())+1):t.html(t.text()+" <span>1</span>"),t.addClass("cl"))},error:error})}}),$(".delete-btn").on("click",function(){if(confirm("Are you sure?")){let e=$(this).siblings(".object").attr("id"),t=e.split("\\"),n=$(this).siblings(".object").val(),s=$(this).parent(".text_block").parent(".answer");isNaN(n)&&error(),$.ajax({url:"/handler/delete-comment",method:"get",dataType:"html",data:{object_type:e,object_id:n},success:function(){"Question"==t[t.length-1]&&(window.location.href="/"),s.remove();let e=$(".answer").length;0==e?($(".answers_container .answers-count").css("display","none"),$(".answers_block").css("display","none")):$(".answers_container .answers-count span").text(e),$(".user_have_answer").css("display","none"),$(".answer_form_block").css("display","flex")},error:error})}}),$(".edit-btn").on("click",function(){if($(this).hasClass("editing"))$(this).siblings(".comment_form_block").css("display","none"),$(this).siblings(".answer_content").children("span").css("display","block"),$(this).removeClass("editing");else{let e=$(this).siblings(".answer_content").children("span").html();$(this).siblings(".answer_content").children("span").css("display","none"),$(this).siblings(".comment_form_block").css("display","block"),$(this).siblings(".comment_form_block").children(".form_block").children(".single_form").children("form").children(".form-group").children("textarea").html(e),$(this).addClass("editing")}}),$(".complain-btn").on("click",function(){if(authCheck()){let e=$(this).siblings(".object").val(),t=$(this);isNaN(e)&&error(),$.ajax({url:"/handler/complain",method:"get",dataType:"html",data:{comment_id:e},beforeSend:function(){t.attr("disabled",!0)},success:function(){setTimeout(()=>t.attr("disabled",!1),1e3)},error:error})}}),$(".approve_ques-btn").on("click",function(){let e=$(this).siblings(".object").val(),t=$(this),n=$(this).parent().siblings(".answer_left_block"),s=$('<i class="bi bi-check"></i>');isNaN(e)&&error(),$.ajax({url:"/handler/approve-answer",method:"get",dataType:"html",data:{comment_id:e},success:function(){t.remove(),n.append(s)},error:error})}),$(".answer-btn").on("click",function(){let e=$(this).siblings(".author_name").text(),t=$(this).parent().parent().siblings(".comment_form_block").children(".form_block").children(".single_form").children("form").children(".form-group").children("textarea");t.text(e+", "+t.text())}),$(document).ready(function(){const e=32*screen.width/100;$("#content_container").css("max-width",screen.width),$(".header_block").css("max-width",screen.width),$("#error .error_block").css("max-width",screen.width),$(".login_form_block").css("width",e),$(".registration_block").css("width",e),$(".forgot_form_block").css("width",e),$(".change_form_block").css("width",e),$(".registration_link").css("width",e),$(".authorization_link").css("width",e)});let url=location.pathname,splited_url=url.split("/"),category=splited_url[splited_url.length-1],page=splited_url[2];function error(){alert("Oops, something is wrong!"),location.reload()}"profile"!=page&&("interesting"==category?$(".interesting").addClass("active"):"noanswer"==category?$(".noanswer").addClass("active"):$(".new").addClass("active")),"profile"==page&&$("."+category+"-btn").addClass("active"),$(".subscribe_tag-btn").on("click",function(){let e=$(this).prop("classList")[1],t=$(this);isNaN(e)&&error(),$.ajax({url:"/handler/sub-tag",method:"get",dataType:"html",data:{tag_id:e},beforeSend:function(){t.attr("disabled",!0)},success:function(){setTimeout(()=>t.attr("disabled",!1),1e3),t.hasClass("cl")?(1==Number(t.children("span").text())?t.text("Подписаться"):t.html("Подписаться <span>"+(Number(t.children("span").text())-1)+"</span>"),t.removeClass("cl")):(t.children("span").length?t.children("span").text(Number(t.children("span").text())+1):t.html(t.text()+" <span>1</span>"),t.addClass("cl"))},error:error})});